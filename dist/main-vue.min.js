"use strict";function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function _iterableToArrayLimit(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var i=[],n=!0,s=!1,r=void 0;try{for(var l,a=t[Symbol.iterator]();!(n=(l=a.next()).done)&&(i.push(l.value),!e||i.length!==e);n=!0);}catch(t){s=!0,r=t}finally{try{n||null==a.return||a.return()}finally{if(s)throw r}}return i}}function _arrayWithHoles(t){if(Array.isArray(t))return t}Vue.component("action-menu",{props:{isOpen:{type:Boolean,default:!1},actions:{type:Array,default:function(){return[]}},position:{type:Object,default:{}}},data:function(){return{}},methods:{actionChosen:function(t){this.$emit("action",t)},clicked:function(){this.$emit("click",this)},close:function(){this.$emit("close",this)},getIconUrl:function(t){switch(t){case"yellow":return"/ressources/yellow-dice-icon.png";case"blue":return"/ressources/blue-dice-icon.png";case"green":return"/ressources/green-dice-icon.png";case"orange":return"/ressources/orange-dice-icon.png";case"purple":return"/ressources/purple-dice-icon.png";case"white":return"/ressources/white-dice-icon.png";case"tick":return"/ressources/tick-icon.png"}}},watch:{actions:function(){}},template:'<div class="action-menu-wrapper" @click.self="close" :class="{ active: isOpen }">\n  <div class="action-menu" :style="{ left: position.x + \'px\', top: position.y + \'px\' }">\n    <div class="action" v-for="(value, index) in actions" @click="actionChosen(value)">\n    \t<div :style="{ \'background-image\': \'url(\'+ getIconUrl(value)+\')\'}" class="icon"/>\n    </div>\n  </div>\n</div>'}),Vue.component("game-board",{props:{playerData:{},currentDices:{},chosenDices:{},deadDices:{}},data:function(){return{zonesActions:{powers:["tick"],yellowCases:["yellow","white","tick"],blueCases:["blue","white","tick"],greenCases:["green","white","tick"],orangeCases:["orange","white","tick"],purpleCases:["purple","white","tick"]},fields:{turnIcons:["reroll","additional","reroll","both","three-players","one-two-players"],yellowGrid:{values:[[3,6,5,0],[2,1,0,5],[1,0,2,4],[0,3,4,6]],rewards:{rows:["blue","orange 4","green","fox"],columns:[10,14,16,20],diagonal:"additional"}},blueGrid:{values:[[0,2,3,4],[5,6,7,8],[9,10,11,12]],rewards:{rows:["orange 5","yellow","fox"],columns:["reroll","green","purple 6","additional"]},points:[1,2,4,7,11,16,22,29,37,46,56]},greenGrid:{values:[{value:1,points:1},{value:2,points:3},{value:3,points:6},{value:4,reward:"additional",points:10},{value:5,points:15},{value:1,reward:"blue",points:21},{value:2,reward:"fox",points:28},{value:3,points:36},{value:4,reward:"purple 6",points:45},{value:5,reward:"reroll",points:55},{value:6,points:66}]},orangeGrid:{values:[{},{},{reward:"reroll"},{multiplier:2},{reward:"yellow"},{reward:"additional"},{multiplier:2},{reward:"fox"},{multiplier:2},{reward:"purple 6"},{multiplier:3}]},purpleGrid:{values:[{},{},{reward:"reroll"},{reward:"blue"},{reward:"additional"},{reward:"yellow"},{reward:"fox"},{reward:"reroll"},{reward:"green"},{reward:"orange 6"},{reward:"additional"}]}}}},methods:{clicked:function(t){t.disabled||this.$emit("clicked",t)},findDice:function(t){if(this.currentDices[t])return this.currentDices[t];if(this.deadDices[t])return this.deadDices[t];for(var e in this.chosenDices)if(this.chosenDices[e].color==t)return this.chosenDices[e].value},isDisabled:function(t,e,i,n){var s=2<arguments.length&&void 0!==i?i:null,r=3<arguments.length&&void 0!==n?n:null;switch(t){case"green":return this.playerData.green.length!=s||!(this.currentDices.green>=e.value||this.currentDices.white>=e.value);case"blue":var l=this.findDice("blue")+this.findDice("white");return this.playerData.blue[r][s]||l!=e;case"yellow":return this.playerData.yellow[r][s]||this.currentDices.yellow!=e&&this.currentDices.white!=e;case"orange":return!this.currentDices.hasOwnProperty("orange")&&!this.currentDices.hasOwnProperty("white")||!(this.playerData.orange.length==s);case"purple":return this.playerData.purple.length!=s||!(this.currentDices.purple>=this.playerData.purple[this.playerData.purple.length-1]||this.currentDices.white>=this.playerData.purple[this.playerData.purple.length-1])}}},mounted:function(){},template:'<div class="board-game">\n\t<div class="gaming-data">\n\t\t<div class="dices">\n\t\t\t<div class="dice-square">\n\t\t\t\t<div class="inner" :class="chosenDices.first.color"><span>{{ chosenDices.first.value }}</span></div>\n\t\t\t</div>\n\t\t\t<div class="dice-square">\n\t\t\t\t<div class="inner" :class="chosenDices.second.color"><span>{{ chosenDices.second.value }}</span></div>\n\t\t\t</div>\n\t\t\t<div class="dice-square">\n\t\t\t\t<div class="inner" :class="chosenDices.third.color"><span>{{ chosenDices.third.value }}</span></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="rows">\n\t\t\t<ul class="turns">\n\t\t\t\t<li v-for="(turnIcon, index) in fields.turnIcons" class="turn-item">\n\t\t\t\t\t<div class="index">{{ (index + 1) }}</div>\n\t\t\t\t\t<div class="icon">\n\t\t\t\t\t\t<div :class="turnIcon" class="inner"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<div class="reroll-power">\n\t\t\t\t<div class="icon">\n\t\t\t\t\t<div class="inner reroll"></div>\n\t\t\t\t</div>\t\n\t\t\t\t<ul>\n\t\t\t\t\t<zone \n\t\t\t\t\t\tv-for="index in 7" \n\t\t\t\t\t\tclass="power-circle tralala"\n\t\t\t\t\t\t:class="playerData.powers.reroll[index]"\n\t\t\t\t\t\t:actions="zonesActions.powers"\n\t\t\t\t\t\t@click="clicked"\n\t\t\t\t\t>\n\t\t\t\t\t</zone>\n\x3c!-- \t\t\t\t\t<li v-for="index in 7" class="power-circle" :class="playerData.powers.reroll[index]"></li>\n --\x3e\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<div class="additional-dice-power">\n\t\t\t\t<div class="icon">\n\t\t\t\t\t<div class="inner additional"></div>\n\t\t\t\t</div>\t\n\t\t\t\t<ul>\n\t\t\t\t\t<li v-for="index in 7" class="power-circle" :class="playerData.powers.additional[index]"></li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="yellow-blue-grids">\n\t\t<div class="yellow-grid">\n\t\t\t<ul v-for="(row, indexRow) in fields.yellowGrid.values" :data-index="indexRow" class="value-row">\n\t\t\t\t<zone \n\t\t\t\t   \tv-for="(item, indexCol) in row"\n\t\t\t\t   \t:data-row="indexRow"\n\t\t\t\t   \t:data-col="indexCol"\n\t\t\t\t   \t:data-value="item"\n\t\t\t\t   \tdata-color="yellow"\n\t\t\t\t   \t@click="clicked"\n\t\t\t\t   \t:actions="zonesActions.yellowCases"\n\t\t\t\t   \t:disabled="isDisabled(\'yellow\', item, indexCol, indexRow)"\n\t\t\t\t>\n\t\t\t\t\t<div v-if="playerData.yellow[indexRow][indexCol]">X</div>\n\t\t\t\t\t<div v-else-if="item">{{ item }}</div>\n\t\t\t\t\t<div v-else>X</div>\n\t\t\t\t</zone>\n\t\t\t\t<div class="reward" :class="fields.yellowGrid.rewards.rows[indexRow]">\n\t\t\t\t\t<div class="inner" :class="fields.yellowGrid.rewards.rows[indexRow]"></div>\n\t\t\t\t</div>\n\t\t\t</ul>\n\t\t\t<div class="column-reward">\n\t\t\t\t<div v-for="item in fields.yellowGrid.rewards.columns" class="reward">\n\t\t\t\t\t<div class="inner">\n\t\t\t\t\t\t<div>{{ item }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="diagonal-reward additional"></div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="blue-grid">\n\t\t\t<ul class="points">\n\t\t\t\t<li v-for="(item, index) in fields.blueGrid.points"> \n\t\t\t\t\t<div class="reward">\n\t\t\t\t\t\t<div class="inner">\n\t\t\t\t\t\t\t<div>{{ item }}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="index">{{ index }}</div>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<div class="rows">\n\t\t\t\t<ul v-for="(row, indexRow) in fields.blueGrid.values" :data-index="indexRow" class="value-row">\n\t\t\t\t\t<zone \n\t\t\t\t\t \tv-for="(item, indexCol) in row" \n\t\t\t\t\t \t:data-row="indexRow" \n\t\t\t\t\t \t:data-col="indexCol"\n\t\t\t\t\t \t:data-value="item"\n\t\t\t\t\t \tdata-color="blue"\n\t\t\t\t\t \t@click="clicked"\n\t\t\t\t\t \t:actions="zonesActions.blueCases"\n\t\t\t\t\t \t:disabled="isDisabled(\'blue\', item, indexCol, indexRow)">\n\t\t\t\t\t\t<div v-if="playerData.blue[indexRow][indexCol]">X</div>\n\t\t\t\t\t\t<div v-else-if="item">{{ item }}</div>\n\t\t\t\t\t\t<div v-else class="dices"></div>\n\t\t\t\t\t</zone>\n\t\t\t\t\t<div class="reward" :class="fields.blueGrid.rewards.rows[indexRow]">\n\t\t\t\t\t\t<div class="inner" :class="fields.blueGrid.rewards.rows[indexRow]"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</ul>\n\t\t\t\t<div class="column-reward">\n\t\t\t\t\t<div v-for="item in fields.blueGrid.rewards.columns">\n\t\t\t\t\t\t<div class="reward" :class="item">\n\t\t\t\t\t\t\t<div class="inner" :class="item"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t<div class="green-grid">\n\t\t<div class="icon">\n\t\t\t<div class="inner"></div>\n\t\t</div>\n\t\t<ul>\n\t\t\t<zone \n\t\t\t\tv-for="(item, index) in fields.greenGrid.values" \n\t\t\t\t:data-value="item.value" \n\t\t\t\t:data-index="index"\n\t\t\t\tdata-color="green"\n\t\t\t\t@click="clicked"\n\t\t\t\t:actions="zonesActions.greenCases"\n\t\t\t\t:disabled="isDisabled(\'green\', item, index)">\n\t\t\t\t<div class="points">\n\t\t\t\t\t<div class="inner">\n\t\t\t\t\t\t<div>{{ item.points }}</div>\n\t\t\t\t\t</div>\t\n\t\t\t\t</div>\n\t\t\t\t<div class="value">\n\t\t\t\t\t<div class="inner" v-if="index < playerData.green.length">X</div>\n\t\t\t\t\t<div class="inner" v-else>≥{{ item.value }}</div>\n\t\t\t\t</div>\n\t\t\t\t<div v-if="item.reward" class="reward" :class="item.reward">\n\t\t\t\t\t<div class="inner" :class="item.reward"></div>\n\t\t\t\t</div>\n\t\t\t</zone>\n\t\t</ul>\n\t</div>\n\t<div class="orange-grid">\n\t\t<div class="icon">\n\t\t\t<div class="inner"></div>\n\t\t</div>\n\t\t<ul>\n\t\t\t<zone \n\t\t\t\tv-for="(item, index) in fields.orangeGrid.values"\n\t\t\t\t@click="clicked"\n\t\t\t\tdata-color="orange"\n\t\t\t\t:data-index="index"\n\t\t\t\t:actions="zonesActions.orangeCases"\n\t\t\t\t:disabled="isDisabled(\'orange\', item, index)">\n\t\t\t\t<div v-if="index < playerData.orange.length" class="multiplier">{{ playerData.orange[index] }}</div>\n\t\t\t\t<div v-else-if="item.multiplier" class="multiplier">x{{ item.multiplier }}</div>\n\t\t\t\t<div v-else class="multiplier"></div>\n\t\t\t\t<div v-if="item.reward" class="reward" :class="item.reward">\n\t\t\t\t\t<div class="inner" :class="item.reward"></div>\n\t\t\t\t</div>\n\t\t\t</zone>\n\t\t</ul>\n\t</div>\n\t<div class="purple-grid">\n\t\t<div class="icon">\n\t\t\t<div class="inner"></div>\n\t\t</div>\n\t\t<ul>\n\t\t\t<zone \n\t\t\t\tv-for="(item, index) in fields.purpleGrid.values"\n\t\t\t\t@click="clicked"\n\t\t\t\t:data-index="index"\n\t\t\t\tdata-color="purple"\n\t\t\t\t:actions="zonesActions.purpleCases"\n\t\t\t\t:disabled="isDisabled(\'purple\', item, index)">\n\t\t\t\t<div v-if="index < playerData.purple.length">{{ playerData.purple[index] }}</div>\n\t\t\t\t<div v-if="item.reward" class="reward" :class="item.reward">\n\t\t\t\t\t<div class="inner" :class="item.reward"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="arrow"></div>\n\t\t\t</zone>\n\t\t</ul>\n\t</div>\n</div>'}),Vue.component("zone",{props:{actions:{type:Array,default:[]},disabled:!1},data:function(){return{}},methods:{clicked:function(){this.$emit("click",this)}},mounted:function(){},watch:{},template:'<li class="zone" @click="clicked" :class="{ done: disabled }">\n\t<slot></slot>\n</li>'}),document.getElementById("vue-game-master")&&new Vue({el:"#vue-game-master",data:{turn:{mode:"roll"},boardGameKey:0,livingDices:{yellow:-1,blue:-1,green:-1,orange:-1,purple:-1,white:-1},deadDices:{},chosenDices:{first:{color:"",value:""},second:{color:"",value:""},third:{color:"",value:""}},playerData:{powers:{reroll:["unused","unused","used"],additional:["used","used","unused"]},yellow:[[0,1,0,0],[1,0,0,0],[0,0,0,0],[0,0,0,0]],blue:[[-1,0,0,0],[0,0,1,1],[0,0,0,0]],green:[3,4],orange:[2,6,5,12],purple:[2,2,4]},activeZone:null,actions:[],actionMenuOpen:!1,actionMenuPosition:{x:0,y:0}},mounted:function(){},methods:{setModeTo:function(t){this.turn.mode=t},setDicesAside:function(t){for(var e in this.livingDices)this.livingDices[e]<t&&(this.deadDices[e]=this.livingDices[e],delete this.livingDices[e])},rerender:function(){this.boardGameKey+=1},getDiceValue:function(t){return this.livingDices[t]},selectDices:function(t){this.chosenDices.first.value?this.chosenDices.second.value?(this.chosenDices.third.value=this.getDiceValue(t),this.chosenDices.third.color=t):(this.chosenDices.second.value=this.getDiceValue(t),this.chosenDices.second.color=t):(this.chosenDices.first.value=this.getDiceValue(t),this.chosenDices.first.color=t),delete this.livingDices[t],this.setModeTo("roll")},doAction:function(t){var e=this.activeZone.$attrs["data-row"],i=this.activeZone.$attrs["data-col"];switch(t){case"yellow":this.playerData.yellow[e][i]=1,this.setDicesAside(this.getDiceValue("yellow")),this.selectDices("yellow");break;case"blue":this.playerData.blue[e][i]=1,this.setDicesAside(this.getDiceValue("blue")),this.selectDices("blue");break;case"green":this.playerData.green.push(this.livingDices.green),this.setDicesAside(this.getDiceValue("green")),this.selectDices("green");break;case"orange":this.playerData.orange.push(this.livingDices.orange),this.setDicesAside(this.getDiceValue("orange")),this.selectDices("orange");break;case"purple":this.playerData.purple.push(this.livingDices.purple),this.setDicesAside(this.getDiceValue("purple")),this.selectDices("purple");break;case"white":switch(this.activeZone.$attrs["data-color"]){case"yellow":this.playerData.yellow[e][i]=1;break;case"blue":this.playerData.blue[e][i]=1;break;case"green":this.playerData.green.push(this.livingDices.white);break;case"orange":this.playerData.orange.push(this.livingDices.white);break;case"purple":this.playerData.purple.push(this.livingDices.white)}this.setDicesAside(this.getDiceValue("white")),this.selectDices("white")}this.setDicesAside(),this.rerender(),this.closeActionMenu()},getRandomInt:function(t){return Math.floor(Math.random()*Math.floor(t))},rollDices:function(){for(var t=0,e=Object.entries(this.livingDices);t<e.length;t++){var i=_slicedToArray(e[t],2),n=i[0];i[1],this.livingDices[n]=this.getRandomInt(6)+1}this.setModeTo("select")},openActionMenu:function(t){var e=this;this.activeZone=t,this.actionMenuOpen=!0,this.actionMenuPosition.x=t.$el.getBoundingClientRect().left+window.scrollX+t.$el.getBoundingClientRect().width/2,this.actionMenuPosition.y=t.$el.getBoundingClientRect().top+window.scrollY+t.$el.getBoundingClientRect().height/2,console.log(t.$props),this.actions=t.$props.actions.filter(function(t){return e.livingDices.hasOwnProperty(t)||"tick"===t})},closeActionMenu:function(){this.actionMenuOpen=!1}},watch:{"chosenDices.third.value":function(){console.log("FIN DU TOUR")}}});
//# sourceMappingURL=main-vue.min.js.map
